{"id":"3338240","content":"package org.springdoc.webmvc.ui;\n\nimport java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport javax.servlet.http.HttpServletRequest;\nimport org.springdoc.core.SwaggerUiConfigParameters;\nimport org.springdoc.core.SwaggerUiConfigProperties;\nimport org.springdoc.core.SwaggerUiOAuthProperties;\nimport org.springdoc.core.providers.ObjectMapperProvider;\nimport org.springdoc.ui.AbstractSwaggerIndexTransformer;\nimport org.springframework.core.io.Resource;\nimport org.springframework.util.AntPathMatcher;\nimport org.springframework.web.servlet.resource.ResourceTransformerChain;\nimport org.springframework.web.servlet.resource.TransformedResource;\n\npublic class SwaggerIndexPageTransformer extends AbstractSwaggerIndexTransformer implements SwaggerIndexTransformer {\n   private final SwaggerWelcomeCommon swaggerWelcomeCommon;\n\n   public SwaggerIndexPageTransformer(SwaggerUiConfigProperties swaggerUiConfig, SwaggerUiOAuthProperties swaggerUiOAuthProperties, SwaggerUiConfigParameters swaggerUiConfigParameters, SwaggerWelcomeCommon swaggerWelcomeCommon, ObjectMapperProvider objectMapperProvider) {\n      super(swaggerUiConfig, swaggerUiOAuthProperties, swaggerUiConfigParameters, objectMapperProvider);\n      this.swaggerWelcomeCommon = swaggerWelcomeCommon;\n   }\n\n   public Resource transform(HttpServletRequest request, Resource resource, ResourceTransformerChain transformerChain) throws IOException {\n      if (this.swaggerUiConfigParameters.getConfigUrl() == null) {\n         this.swaggerWelcomeCommon.buildFromCurrentContextPath(request);\n      }\n\n      AntPathMatcher antPathMatcher = new AntPathMatcher();\n      boolean isIndexFound = antPathMatcher.match(\"**/swagger-ui/**/swagger-initializer.js\", resource.getURL().toString());\n      if (isIndexFound) {\n         String html = this.defaultTransformations(resource.getInputStream());\n         return new TransformedResource(resource, html.getBytes(StandardCharsets.UTF_8));\n      } else {\n         return resource;\n      }\n   }\n}\n"}