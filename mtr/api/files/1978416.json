{"id":"1978416","content":"package ch.qos.logback.classic.servlet;\n\nimport ch.qos.logback.classic.util.StatusViaSLF4JLoggerFactory;\nimport ch.qos.logback.core.util.OptionHelper;\nimport java.util.Set;\nimport javax.servlet.ServletContainerInitializer;\nimport javax.servlet.ServletContext;\nimport javax.servlet.ServletException;\n\npublic class LogbackServletContainerInitializer implements ServletContainerInitializer {\n   public void onStartup(Set<Class<?>> c, ServletContext ctx) throws ServletException {\n      if (this.isDisabledByConfiguration(ctx)) {\n         StatusViaSLF4JLoggerFactory.addInfo(\"Due to deployment instructions will NOT register an instance of \" + LogbackServletContextListener.class + \" to the current web-app\", this);\n      } else {\n         StatusViaSLF4JLoggerFactory.addInfo(\"Adding an instance of  \" + LogbackServletContextListener.class + \" to the current web-app\", this);\n         LogbackServletContextListener lscl = new LogbackServletContextListener();\n         ctx.addListener(lscl);\n      }\n   }\n\n   boolean isDisabledByConfiguration(ServletContext ctx) {\n      String disableAttributeStr = null;\n      Object disableAttribute = ctx.getInitParameter(\"logbackDisableServletContainerInitializer\");\n      if (disableAttribute instanceof String) {\n         disableAttributeStr = (String)disableAttribute;\n      }\n\n      if (OptionHelper.isEmpty(disableAttributeStr)) {\n         disableAttributeStr = OptionHelper.getSystemProperty(\"logbackDisableServletContainerInitializer\");\n      }\n\n      if (OptionHelper.isEmpty(disableAttributeStr)) {\n         disableAttributeStr = OptionHelper.getEnv(\"logbackDisableServletContainerInitializer\");\n      }\n\n      return OptionHelper.isEmpty(disableAttributeStr) ? false : disableAttributeStr.equalsIgnoreCase(\"true\");\n   }\n}\n"}