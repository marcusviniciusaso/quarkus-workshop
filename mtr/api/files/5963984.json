{"id":"5963984","content":"package ch.qos.logback.classic.selector.servlet;\n\nimport ch.qos.logback.classic.LoggerContext;\nimport ch.qos.logback.classic.selector.ContextJNDISelector;\nimport ch.qos.logback.classic.selector.ContextSelector;\nimport ch.qos.logback.classic.util.ContextSelectorStaticBinder;\nimport java.io.IOException;\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport org.slf4j.LoggerFactory;\n\npublic class LoggerContextFilter implements Filter {\n   public void destroy() {\n   }\n\n   public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n      LoggerContext lc = (LoggerContext)LoggerFactory.getILoggerFactory();\n      ContextSelector selector = ContextSelectorStaticBinder.getSingleton().getContextSelector();\n      ContextJNDISelector sel = null;\n      if (selector instanceof ContextJNDISelector) {\n         sel = (ContextJNDISelector)selector;\n         sel.setLocalContext(lc);\n      }\n\n      try {\n         chain.doFilter(request, response);\n      } finally {\n         if (sel != null) {\n            sel.removeLocalContext();\n         }\n\n      }\n\n   }\n\n   public void init(FilterConfig arg0) throws ServletException {\n   }\n}\n"}